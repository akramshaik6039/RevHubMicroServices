<div class="row">
  <div class="col-md-8 mx-auto">
    <h2 class="mb-4">Chat with {{selectedUser}}</h2>
    <div class="card" style="height: 500px;">
      <div class="card-body d-flex flex-column">
        <div class="flex-grow-1 mb-3 overflow-auto messages-container">
          <div *ngIf="messages.length === 0" class="alert alert-light">No messages yet</div>
          <div *ngFor="let message of messages" class="mb-3">
            <div class="d-flex" [ngClass]="{'justify-content-end': message.senderUsername === currentUser}">
              <div class="message-bubble" [ngClass]="{
                'bg-primary text-white': message.senderUsername === currentUser,
                'bg-light': message.senderUsername !== currentUser
              }" style="max-width: 70%; padding: 10px; border-radius: 15px;">
                <div class="fw-bold mb-1">{{message.senderUsername}}</div>
                <div>{{message.content}}</div>
                <div class="small mt-1" [ngClass]="{
                  'text-white-50': message.senderUsername === currentUser,
                  'text-muted': message.senderUsername !== currentUser
                }">
                  {{formatDateTime(message.timestamp)}}
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="input-group">
          <input 
            type="text" 
            class="form-control" 
            placeholder="Type a message......" 
            [(ngModel)]="newMessage"
            (keyup.enter)="sendMessage()">
          <button class="btn btn-primary" (click)="sendMessage()">Send</button>
        </div>
      </div>
    </div>
  </div>
</div>